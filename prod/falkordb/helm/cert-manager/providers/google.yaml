# Google Cloud DNS DNS-01 ClusterIssuer
#
# Prerequisites:
#   1. Create Service Account with DNS Admin role:
#      gcloud iam service-accounts create cert-manager-dns01 \
#        --display-name="cert-manager DNS01"
#      
#      gcloud projects add-iam-policy-binding <PROJECT_ID> \
#        --member="serviceAccount:cert-manager-dns01@<PROJECT_ID>.iam.gserviceaccount.com" \
#        --role="roles/dns.admin"
#      
#      gcloud iam service-accounts keys create key.json \
#        --iam-account=cert-manager-dns01@<PROJECT_ID>.iam.gserviceaccount.com
#
#   2. Create the secret:
#      kubectl create secret generic google-cloud-dns-credentials \
#        --namespace cert-manager \
#        --from-file=key.json
#
# Usage:
#   kubectl apply -f google.yaml
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-dns01
spec:
  acme:
    email: cloud@usecortex.ai  # UPDATE: Your email
    server: https://acme-v02.api.letsencrypt.org/directory
    privateKeySecretRef:
      name: letsencrypt-dns01-key
    solvers:
    - dns01:
        cloudDNS:
          project: <PROJECT_ID>  # UPDATE: Your GCP project ID
          serviceAccountSecretRef:
            name: google-cloud-dns-credentials
            key: key.json
